<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>砖转 拽专 住住拽</title>
    <!-- 注转 Tailwind CSS 住 专 专住驻住 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 砖砖 驻 Ariel 专专转  -->
    <style>
        body {
            font-family: Arial, sans-serif;
            direction: rtl;
            background-color: #e6f0ff; /* 专拽注  专  */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            padding: 30px; /* 专 专 */
            border-radius: 20px; /* 驻转 注转  */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2); /* 爪转 注拽 专转 */
            max-width: 800px; /* 专  注 */
            width: 100%;
            margin-top: 30px;
            border: 1px solid #c3d7f7;
        }

        /* 住转 住 驻转 砖 */
        #welcome-screen {
            text-align: center;
            padding: 50px 30px;
            background: linear-gradient(135deg, #f0f8ff 0%, #d4e7ff 100%); /* 专 - 注 */
            border-radius: 16px;
            border: 3px solid #3b82f6;
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.4);
        }
        #welcome-screen h1 {
            font-size: 2.5rem;
            font-weight: 900;
            color: #1e40af; /*  注拽 */
            margin-bottom: 15px;
            line-height: 1.2;
        }
        #welcome-screen p {
            font-size: 1.2rem;
            color: #4b5563;
            margin-bottom: 40px;
        }
        .start-button {
            background-color: #10b981; /* 专拽  */
            color: white;
            padding: 18px 40px;
            border-radius: 9999px;
            font-size: 1.3rem;
            font-weight: 800;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* 驻拽 拽驻爪  */
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.5);
        }
        .start-button:hover {
            background-color: #059669;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 25px rgba(16, 185, 129, 0.7);
        }

        /* 住转   */
        .question-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        /* 住  转 拽砖 */
        .difficulty-text {
            font-size: 1rem;
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 10px;
            border: 1px solid;
            display: inline-block; /* 砖 砖专 注 专 */
            margin-bottom: 15px; /* 专 转转 砖 */
        }
        /* 爪注转 拽砖 转 */
        .difficulty-easy {
            background-color: #d1fae5; /* Light Green */
            color: #059669; /* Dark Green */
            border-color: #38a169;
        }
        .difficulty-medium {
            background-color: #fffbeb; /* Light Yellow */
            color: #d97706; /* Dark Orange/Yellow */
            border-color: #f6ad55;
        }
        .difficulty-hard {
            background-color: #fee2e2; /* Light Red */
            color: #b91c1c; /* Dark Red */
            border-color: #ef4444;
        }
        .difficulty-very-hard {
            background-color: #f3e5e9; /* Light Burgundy/Pink */
            color: #831843; /* Deep Burgundy/Maroon */
            border-color: #be185d;
        }

        /* 砖驻专  驻转专 转砖 */
        .option-button {
            display: block;
            width: 100%;
            padding: 18px 28px;
            margin-bottom: 18px;
            background-color: #f8faff; /* - 注 */
            color: #2c5282;
            border: 1px solid #c3d7f7;
            border-radius: 12px;
            font-size: 1.15rem;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease-in-out;
        }
        .option-button:hover:not(.correct):not(.incorrect):not(:disabled) {
            background-color: #eef5ff;
            border-color: #4299e1;
            transform: translateX(3px); /* 驻拽 拽专  */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        .option-button.correct {
            background-color: #d4edda; /* 专拽 专  */
            color: #1f7a29; 
            border-color: #38a169;
            box-shadow: 0 0 15px rgba(56, 161, 105, 0.6);
        }
        .option-button.incorrect {
            background-color: #fde8e8; /*  专  */
            color: #9b2c2c;
            border-color: #e53e3e;
            box-shadow: 0 0 15px rgba(227, 52, 47, 0.6);
        }
        
        /* 驻转专 驻注 -  爪注 */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        .action-buttons button {
            flex: 1;
            padding: 16px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* 驻转专  - 专拽 爪 */
        .next-button {
            background-color: #10b981; 
            color: white;
        }
        .next-button:hover {
            background-color: #059669;
            transform: translateY(-2px);
        }
        
        /* 驻转专 祝 砖 -  驻注 */
        .replace-button {
            background-color: #3b82f6; 
            color: white;
        }
        .replace-button:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }

        /* 驻转专  - 驻专 驻拽爪 */
        .skip-button {
            background-color: #9ca3af; 
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .skip-button:hover {
            background-color: #6b7280;
            transform: translateY(-1px);
        }

        /*  专爪祝 - 拽  转转 转拽转 */
        .progress-and-streak {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .progress-text {
            flex-grow: 1;
            text-align: right;
            margin-left: 15px;
        }
        .streak-meter {
            background-color: #f7f3ff;
            border: 2px solid #a78bfa;
            color: #6d28d9;
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /*   (拽 转拽) */
        .learning-meter-container {
            margin-top: 5px;
            margin-bottom: 25px;
        }
        
        /* 住转 住 住 注 */
        .results-box {
            text-align: center;
            padding: 40px 30px;
            background: linear-gradient(145deg, #f0fff4 0%, #ccfbf1 100%); 
            border: 3px solid #10b981;
            border-radius: 20px;
            color: #065f46;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }
        .results-box h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: #059669;
        }
        #verbal-assessment {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 25px;
            padding: 15px;
            border-radius: 12px;
            background-color: #e0f2fe;
            color: #1e40af;
        }
        .restart-button {
            background-color: #3b82f6; /*   驻转专 砖 */
            color: white;
            padding: 16px 35px;
            border-radius: 9999px;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
        }
        .restart-button:hover {
            background-color: #2563eb;
        }

        /* 住转 拽驻抓 住 */
        .streak-bonus-popup {
            background-color: #fbbf24; /* 爪 拽 */
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.8);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 住 驻转 -->
        <div id="welcome-screen">
            <h1>砖转 拽专 住住拽 注  "</h1>
            <p>转/ 转 转专 拽 砖 拽专转 .    20 砖转 拽专转 转 专 拽祝 砖 砖 拽专住.  爪!</p>
            <button class="start-button" id="start-quiz-button">转/ </button>
        </div>

        <!-- 住  (住转专 转) -->
        <div id="quiz-screen" class="hidden">
            <div class="progress-and-streak">
                <p class="progress-text" id="progress-display">砖 1 转 20</p>
                <!--  专爪祝 -->
                <div class="streak-meter" id="streak-meter">
                    <span class="streak-icon"></span> 专爪祝: <span id="current-streak">0</span>
                </div>
            </div>
            
            <!--   -->
            <div class="learning-meter-container">
                <div class="learning-meter-fill" id="learning-meter-fill" style="width: 0%;"></div>
            </div>
            <p class="learning-meter-text" id="learning-meter-text"> : 0%</p>

            <!-- 拽 砖 转 拽砖 -->
            <span class="difficulty-text mb-4" id="difficulty-display"></span>
            
            <div class="question-text" id="question-display"></div>
            
            <div id="options-container">
                <!-- 驻转专 转砖转 爪  -->
            </div>
            <div class="feedback-box hidden" id="feedback-display">
                <!-- 砖 住专 爪  -->
            </div>
            <div class="action-buttons">
                <button class="next-button hidden" id="next-button"></button>
                <button class="skip-button" id="skip-button"></button>
                <button class="replace-button" id="replace-button">祝 砖</button>
            </div>
        </div>

        <!-- 住 转爪转 (住转专 转) -->
        <div id="results-screen" class="hidden">
            <div class="results-box">
                <h2 id="results-title">住 </h2>
                <p id="final-score"></p>
                <div id="verbal-assessment"></div>
                <p class="learning-meter-text mt-4" id="final-learning-meter-text"></p>
                <button class="restart-button" id="restart-button"> 砖</button>
            </div>
        </div>
    </div>
    <div id="bonus-popup-container"></div>

    <script>
        // 注专 砖转  - 65 砖转 转 拽驻转.
        const allQuestions = [
            // 砖注专 1:  砖 住
            { id: 'q1_1', question: "  注拽专  住住拽 转专转 住住拽 住拽转", options: ["住住拽 转专转 转专转 转, 住拽转 住拽 住拽转 注 住", "住住拽 转专转 注住拽转 专拽 砖转 转, 住拽转 专拽 转", "住住拽 转专转 专砖转  , 住拽转  住转驻拽  拽", "  转,  专拽 砖转 砖 转 转"], correctAnswer: 0, explanation: "住住拽 转专转 注住拽转 住, 专 爪转 转 (砖, 爪注, 爪, 专驻). 住住拽 住拽转 砖转砖转 转   住拽 住拽转,  爪注 注专转  住  转专", topic: "", difficulty: "拽" },
            { id: 'q1_2', question: "  砖  转专 转  驻专 砖转  专爪 拽专", options: ["", "砖转", "住", "拽注"], correctAnswer: 2, explanation: "住   驻专 (砖, 拽, 专注) 砖转 拽专 注 拽专 住拽  住拽转.   转转-拽爪 砖 住", topic: "", difficulty: "拽" },
            { id: 'q1_3', question: " 转 转 住住转 转专 住住拽", options: ["", "转爪驻转", "砖转", "住"], correctAnswer: 1, explanation: "转爪驻转 (Observation)  注专  砖 砖转 注专 转 转 住转", topic: "", difficulty: "拽" },
            { id: 'q1_4', question: " '拽注' 拽砖专 住住", options: ["注专 砖转 砖砖转  ", "驻 砖 砖转  驻专 住  ", " 专 爪", "注转  拽注"], correctAnswer: 1, explanation: "拽注  驻  转 砖 砖转  驻专 拽专,  砖转 砖注专 砖转", topic: "", difficulty: "拽" },
            { id: 'q1_5', question: " 专转 住住拽 转 拽专", options: ["住 砖注专转 拽专", "住祝 转 驻 砖转", "转 转 住拽  住拽转  住", "爪 转 住拽转 拽专 拽 专"], correctAnswer: 2, explanation: "住住拽 砖砖转  转 转 砖住驻 拽专, 注 转 住 转 住拽  住拽转 转拽驻转  住  拽 ", topic: "", difficulty: "" },

            // 砖注专 2: 爪转 转 专转 
            { id: 'q2_1', question: " 专转  砖 砖转 '爪注 注' (, , 专拽)", options: ["砖 ()", "住专 (专)", "专 (专)", " (专爪)"], correctAnswer: 0, explanation: "专转  砖转 (转) 砖砖转 住 拽专转  住专  专 注 . 爪注 注   爪转 ", topic: "爪转 转", difficulty: "拽" },
            { id: 'q2_2', question: " 住 专祝 砖转砖  爪 转 转驻转 爪 拽专住 (-0 注 100)", options: ["专祝 注", "专祝 注转", "住专", "专转 驻专"], correctAnswer: 2, explanation: "住专 转 爪转 转驻转 砖 砖转 转 专爪祝   注 拽专转 专转 ( 爪), 砖专 爪专 驻拽 爪  注专  爪 转 砖转  ", topic: "爪转 转", difficulty: "" },
            { id: 'q2_3', question: " 专转  砖 砖转 '专 砖注转 专爪' (, , )", options: ["砖", "住专", "专", ""], correctAnswer: 1, explanation: "专转  住专 (专转) 驻砖专转 住专 转 拽专转 驻 住专 ,   专 砖  注专", topic: "爪转 转", difficulty: "拽" },
            { id: 'q2_4', question: " 住 砖 转驻转 转专转 爪 砖 专 转爪驻转 专转 爪  砖 专祝, 注 '' 专 爪 砖", options: ["转驻转 住专转", "转驻转 -住专转 转", "转驻转 -住专转 砖转", "转驻转 专转"], correctAnswer: 2, explanation: "转驻转 -住专转 砖转 (Skewed Left) 转驻转 专 转   专  注专  (砖)", topic: "爪转 转", difficulty: "" },
            { id: 'q2_5', question: " 转 砖转 爪专转", options: [" 爪 转 住驻专 驻注 砖 注专 驻注", " 爪 转  住 砖  注专", " 爪 转 住 砖转 注 注专 住 ", " 爪 专拽 转 注专 驻爪 转专"], correctAnswer: 2, explanation: "砖转 爪专转  住 砖转 砖  注专   砖 注专 住", topic: "爪转 转", difficulty: "" },
            { id: 'q2_6', question: "砖转 '住驻专  砖驻'   砖转", options: ["转 砖", "转 住专", "转 ", "转 专爪祝"], correctAnswer: 2, explanation: "砖转 转   砖转 砖注专  住驻专 砖 转 住驻专 (砖, 住驻专 , 住驻专 转)", topic: "爪转 转", difficulty: "拽" },
            { id: 'q2_7', question: " 专转   驻住  (注专  砖 转 转)", options: ["住专", "专", "", "驻住 专"], correctAnswer: 2, explanation: "专转  (Ratio)  专转   砖砖  砖注转 '驻住 ', 驻砖专转 住  注专 (砖, 砖拽, , )", topic: "爪转 转", difficulty: "拽砖" },

            // 砖注专 3:  专 驻专
            { id: 'q3_1', question: "住专转 转: 5, 8, 10, 12, 15,  爪", options: ["5", "10", "12", "15"], correctAnswer: 1, explanation: "爪  注专 爪注 住专转 转 住专转. 住专 5, 8, 10, 12, 15, 注专 爪注  10", topic: " 专 驻专", difficulty: "拽" },
            { id: 'q3_2', question: "  驻专 砖驻注 爪专 拽爪转 转专 注  注专 拽爪 (Outliers)", options: ["", "砖转", "住转 转拽", "驻专驻专爪"], correctAnswer: 0, explanation: " (驻专砖  注专 拽住 ) 砖驻注 驻 砖专 砖注转  注专 拽爪", topic: " 专 驻专", difficulty: "" },
            { id: 'q3_3', question: " 转驻转 爪注, 爪 砖  转 ", options: ["转驻转 -住专转 转", "转驻转 -住专转 砖转", "转驻转 专转 (住专转)", "转驻转 -砖转"], correctAnswer: 2, explanation: "转驻转 住专转 ( 转驻转 专转), 爪注, 爪 砖 转 拽 转 专 转驻转", topic: " 专 驻专", difficulty: "拽" },
            { id: 'q3_4', question: " 砖转 (Variance)", options: ["砖专砖 专注 砖 住转 转拽", " 驻专 爪注 砖 专注 砖 住转 爪注", "驻专砖  注专   转专", " 专 砖 转"], correctAnswer: 1, explanation: "砖转   驻专 爪注 砖 专注 住转 砖  转爪驻转 爪注.  转 转 驻专 爪注 砖 转 住 爪注", topic: " 专 驻专", difficulty: "拽砖" },
            { id: 'q3_5', question: " 驻专驻专爪", options: ["住驻专 转爪驻转 拽专 住转", "拽 住 砖 拽专 住转 转 住 ", " 专 砖转 转", " 驻专 砖转 转"], correctAnswer: 1, explanation: "驻专驻专爪  拽 住 砖 拽 住 转 砖, 砖转 住驻专 转爪驻转 拽专 拽 住  转爪驻转", topic: " 专 驻专", difficulty: "拽" },
            { id: 'q3_6', question: " 砖 (Mode) 住专转 转: 2, 3, 3, 4, 5, 5, 5, 6", options: ["3", "4", "5", "3 -5"], correctAnswer: 2, explanation: "砖  注专 驻注 住驻专 驻注 专 转专 住专转 转. 拽专 , 5 驻注 3 驻注", topic: " 专 驻专", difficulty: "拽" },
            { id: 'q3_7', question: "  专   砖转 砖 注专 砖转 专转  砖转", options: ["爪注", "爪", "砖", " 转砖转 转"], correctAnswer: 2, explanation: "砖   专  砖转 砖 注专 砖转 砖,  砖 转专 转 拽专 驻爪 转专  专砖 住专  专  注专", topic: " 专 驻专", difficulty: "" },
            { id: 'q3_8', question: " 拽专 爪注 爪 转驻转 -住专转 转 ( )", options: ["爪注  爪", "爪  爪注", "爪注 爪 砖", "砖  爪注"], correctAnswer: 0, explanation: "转驻转 -住专转 转 ( ), 注专 拽爪  '砖' 转 爪注 驻 注 转专 砖专 转 爪,  爪注  爪", topic: " 专 驻专", difficulty: "拽砖" },

            // 砖注专 4:  拽 住 转驻转 专转
            { id: 'q4_1', question: " 爪 转拽 (Z-score) 砖 住  0,  砖注转 专", options: ["住 拽 转 爪  转专", "住 拽 转 爪  转专", "爪 住 砖 爪注 拽爪", "爪 住 爪 住转 转拽 转 注 爪注"], correctAnswer: 2, explanation: "爪 转拽 (Z-score)   住转 转拽 爪 住 专拽 爪注. 爪 Z 砖 0 爪 砖爪 住驻爪驻  爪注 拽爪", topic: "转驻转 专转", difficulty: "拽" },
            { id: 'q4_2', question: "注 驻 拽 驻专 (注专 转驻转 专转),   转爪驻转 驻  砖 住转 转拽 转 注 转转 爪注", options: ["68%", "95%", "99.7%", "50%"], correctAnswer: 0, explanation: "拽 驻专 拽注 砖转驻转 专转: -68% 转爪驻转 爪转  砖 住转 转拽 转 爪注", topic: "转驻转 专转", difficulty: "" },
            { id: 'q4_3', question: "  75", options: ["爪 砖-75% 爪  ", "爪 砖-75% 爪   砖 ", "爪 爪注 砖 75% 拽爪", "爪  转专 -75% 注"], correctAnswer: 1, explanation: " 75 ( 专注 砖砖)  注专 砖-75% 转爪驻转 注专 转 住专 爪转 转转  砖转 ", topic: "转驻转 专转", difficulty: "" },
            { id: 'q4_4', question: "砖驻  专 拽注  转驻转  砖 爪注 转 专转 砖专", options: [" 拽 ", "住转 转拽 砖 住 注", "  住驻拽  (专  N>30)", "住 注爪 转驻转 专转"], correctAnswer: 2, explanation: "砖驻  专 拽注 砖  转驻转 住  专转, 转驻转  砖 爪注 转转拽专 转驻转 专转  砖  ", topic: "转驻转 专转", difficulty: "拽砖" },
            { id: 'q4_5', question: " 拽 驻专 拽砖专 砖 转驻转 专转", options: ["拽 住驻专 ", " 68-95-99.7", "砖驻  专", " "], correctAnswer: 1, explanation: "拽 驻专, 注   68-95-99.7, 转专 转  转爪驻转 驻转  砖 住转 转拽 转, 砖转 砖砖 爪注 转驻转 专转", topic: "转驻转 专转", difficulty: "" },
            { id: 'q4_6', question: " 专转 驻转 爪  爪 转拽 (Z-score)", options: ["驻 转 爪 注专 ", "砖转 爪 转 转驻转 砖转", "砖 转 爪注 爪", "砖转 转 专转  砖 爪"], correctAnswer: 1, explanation: "爪 转拽 驻砖专  转 拽 住 砖 爪 住 转 转驻转, 注   砖转 爪 砖注 转驻转 砖转 注转 爪注 住转 转拽 砖", topic: "转驻转 专转", difficulty: "" },
            { id: 'q4_7', question: " '拽 住驻专 '", options: [" 砖  转专,  住住拽 驻转 拽转 转专", " 砖住驻专 住 ,  爪注 转爪转 转拽专 转转 住", "住转专转 注转 住 I 专转  砖  转专", "住转专转 注转 住 II 注  砖 拽 转专"], correctAnswer: 1, explanation: "拽 住驻专  拽注 砖 砖 转 住驻专 转爪驻转  住,  爪注   转拽专 转专 转专 转转 转转 砖 住", topic: "转驻转 专转", difficulty: "拽砖" },
            { id: 'q4_8', question: "转驻转 专转,   专 砖  -50", options: ["爪注", "爪", "砖", " 转砖转 转"], correctAnswer: 3, explanation: "转驻转 专转, 爪注, 爪 砖 砖,   爪 转  -50 (爪), 砖  拽 转 转 砖 爪 砖", topic: "转驻转 专转", difficulty: "拽" },

            // 砖注专 5: 住住拽 转专转 住拽转
            { id: 'q5_1', question: " 专 注拽专转 砖 转 专 专 住", options: ["转专 转  专 砖 ", "注专 转 驻专专 转 砖 住  住 砖 ", " 拽砖专  砖 砖转", "砖 转 住转 转拽 砖 "], correctAnswer: 1, explanation: "专 专 住 住驻拽  注专, 砖专 转  爪驻 爪 转 驻专专 转 砖 住 (砖, 爪注 住) 专转  住转 (砖, 95%)", topic: "住住拽 住拽转", difficulty: "" },
            { id: 'q5_2', question: " '' 拽砖专 砖 拽专 住住", options: ["转 住祝  转 住 ", "转 专转 转转-拽爪 砖 驻专 转 住 爪专 拽专", "砖 爪注 爪 砖 拽爪转 住", "爪转 转 爪注转 专驻 转"], correctAnswer: 1, explanation: "  转 砖 专 转转-拽爪 () 砖 驻专 转 住  转专, 转 专 拽专 转  住拽  住拽转  住 ", topic: "住住拽 住拽转", difficulty: "拽" },
            { id: 'q5_3', question: " 注转 转拽 砖 爪注", options: ["住转 转拽 砖 住", "住转 转拽 砖 ", "住转 转拽 砖 转驻转  砖 爪注", "驻专砖  爪注  爪注 住"], correctAnswer: 2, explanation: "注转 转拽 砖 爪注 (Standard Error of the Mean)  住转 转拽 砖 转驻转  砖 爪注.  转 转 拽 砖 爪注   爪注 住", topic: "住住拽 住拽转", difficulty: "拽砖" },
            { id: 'q5_4', question: "砖专   专 专 住,  爪 专转  (Confidence Level)", options: ["住转专转 砖 砖 爪 转 住", "住转专转 砖驻专专 转 砖 住 驻 转 专 砖", "住转专转 注转 住 I", "住转专转 注转 住 II"], correctAnswer: 1, explanation: "专转  (砖, 95%) 爪转 转  驻注 砖,   专 住 专  砖, 专 住   转 驻专专 转 砖 住", topic: "住住拽 住拽转", difficulty: "拽砖" },
            { id: 'q5_5', question: " 专 注拽专转 砖 ' 拽专转 驻砖'", options: [" 砖 驻专 住 专 ", " 砖 驻专 住 砖 住 砖 专 ", "专 转 驻专  转专 拽专", "拽 转 注转 转拽 砖 爪注"], correctAnswer: 1, explanation: " 拽专转 驻砖  砖转  砖  驻专 住 砖 住 砖 转 转  ,  砖 爪转  转专 砖  住", topic: "住住拽 住拽转", difficulty: "" },
            { id: 'q5_6', question: "注 砖 爪注  拽专转 拽专", options: ["  砖  拽  驻砖专", "  砖 专 转 驻专  转专 拽专", "  转 住 砖  爪 住", " 拽 转 砖转 转 "], correctAnswer: 2, explanation: " 拽专转  转 住 砖  爪 住,  驻砖专转  转 爪  住  专 转专", topic: "住住拽 住拽转", difficulty: "" },

            // 砖注专 6: 转 拽转 砖注专转 '
            { id: 'q6_1', question: " 砖注专转 驻住 (H0) 拽转 砖注专转", options: ["砖注专 注转 拽 砖 驻拽   砖注转", "砖注专 注转 砖 驻拽    拽爪转/砖转", "砖注专 砖转 专拽  T", "砖注专 砖转 转 拽专 住住"], correctAnswer: 1, explanation: "砖注专转 驻住 (H0)  砖注专 砖专转  砖 驻拽,  ,   拽砖专 住. 拽转 砖注专转 住 驻专 转 H0 转 砖注专 专转", topic: "拽转 砖注专转", difficulty: "" },
            { id: 'q6_2', question: " '拽转 住住转' (Statistical Significance)", options: ["住转专转 砖转爪转 砖转拽   转爪转 拽专转 ", "住转专转 转 转 砖注专转 驻住 砖专   爪转 (注转 住 I)", "住转专转 砖砖注专转 拽专 ", " 驻拽 砖爪 拽专"], correctAnswer: 1, explanation: "拽转 住住转 (专转 驻)  住转专转 转 转 砖注专转 驻住 砖专  注砖 . 专 拽转  0.05 (5%), 专, 住 砖 5% 注转 住 I", topic: "拽转 砖注专转", difficulty: "拽砖" },
            { id: 'q6_3', question: " 砖注专 专转 (H1)", options: ["砖注专 注转 砖   驻拽", "砖注专 注转 拽 砖   驻拽", "砖注专 砖转 专拽  Z", "砖注专 砖转 转拽转 拽专"], correctAnswer: 1, explanation: "砖注专 专转 (H1)  砖注专转 拽专, 注转 拽 砖 驻拽,   拽砖专 住", topic: "拽转 砖注专转", difficulty: "拽" },
            { id: 'q6_4', question: " '注专 拽专' 拽转 砖注专转", options: ["爪  转专 ", "爪  转专 ", "注专 砖 住住  砖注专   转 砖注专转 驻住", "注专 砖 住住  砖转转 拽 转 砖注专转 驻住"], correctAnswer: 2, explanation: "注专 拽专   砖拽注 专砖 (注 住住 专转 拽转) 砖驻专  专  专 拽 砖 砖注专转 驻住 转驻转 ", topic: "拽转 砖注专转", difficulty: "拽砖" },
            { id: 'q6_5', question: " P-value (注专 驻 转)", options: ["住转专转 拽 转 砖注专转 驻住", "住转专转 砖转爪转 砖转拽 拽专转,  砖砖注专转 驻住 ", "住转专转 注转 住 II", "专转  砖 "], correctAnswer: 1, explanation: "P-value  住转专转 拽 转爪 拽爪转   砖转拽  ( 拽爪转 转专),  砖砖注专转 驻住 .  P-value 拽 专转 拽转 (驻),  转 H0", topic: "拽转 砖注专转", difficulty: "拽砖 " },
            { id: 'q6_6', question: " 专转 拽转 (驻)", options: ["住转专转 砖砖注专转 拽专 ", "住转专转 转 转 砖注专转 驻住 砖专   (注转 住 I)", "住转专转 拽 转 砖注专转 驻住 砖专  砖", "爪 爪注 砖 "], correctAnswer: 1, explanation: "专转 拽转 (驻)  住祝 砖拽注 专砖 拽转  拽转 砖注专转.  爪转 转 住 拽住 砖  拽转 注转 住 I", topic: "拽转 砖注专转", difficulty: "" },
            { id: 'q6_7', question: " 专 转驻转  爪 注专 住住  砖 转 砖注专转 驻住", options: ["专 拽", "专 ", "专 专", "专 爪注"], correctAnswer: 1, explanation: "专  (Rejection Region)   注专 拽爪 砖 住住 , 砖 注专 砖 驻 转,   转 砖注专转 驻住", topic: "拽转 砖注专转", difficulty: "拽" },

            // 砖注专 7: 转 拽转 砖注专转 '
            { id: 'q7_1', question: "拽专 爪注  住住  转 砖注专转 驻住 (H0), 专转 砖爪转 H0 .  注转  爪注", options: ["注转 住 I (驻)", "注转 住 II ()", "注转 ", "注转 "], correctAnswer: 0, explanation: "注转 住 I (驻) 转专砖转 砖专  转 砖注专转 驻住 (H0) 专转 砖  爪转.  注转 '注拽转 砖'", topic: "注转 住拽", difficulty: "" },
            { id: 'q7_2', question: "  注拽专  砖注专 -转 (-爪转) -转 (-爪转)", options: ["-转 拽转   , -转 拽转   住驻爪驻", "-转 专砖转   转专 -转", "-转 拽 转专 砖 -转", "  转, 专拽 砖转 砖"], correctAnswer: 0, explanation: "砖注专 -转 拽转  拽   拽砖专,  爪  (砖, '拽 '). 砖注专 -转 驻专转 转    拽砖专 (砖, '拽爪 '  转专 拽爪 '')", topic: "注转 住拽", difficulty: "拽砖" },
            { id: 'q7_3', question: " 注转 住 II ()", options: ["转 砖注专转 驻住 砖 ", "拽转 砖注专转 驻住 砖 砖", "-转 砖注专 专转 砖 ", "专 砖 砖  住住"], correctAnswer: 1, explanation: "注转 住 II () 转专砖转 砖专 拽 (  ) 转 砖注专转 驻住 (H0) 专转 砖 砖 爪转.  注转 '爪'", topic: "注转 住拽", difficulty: "" },
            { id: 'q7_4', question: " 注爪 住住转 (Power)", options: ["住转专转 注转 住 I", "住转专转 注转 住 II", "住转专转 转 转 砖注专转 驻住 砖  砖", "住转专转 拽 转 砖注专转 驻住 砖 "], correctAnswer: 2, explanation: "注爪 住住转  住转专转 砖  住住 转  转 砖注专转 驻住 砖专   砖 爪转 (专, 1 住 )", topic: "注转 住拽", difficulty: "拽砖 " },
            { id: 'q7_5', question: " P-value 拽 -0.05,   住住转 拽", options: ["拽 转 砖注专转 驻住", " 转 砖注专转 驻住", "爪注  住祝", "转爪转  拽转"], correctAnswer: 1, explanation: "砖专 P-value 拽 专转 拽转 (驻, 砖 0.05),  爪注 注  砖住 砖转爪转 拽专转   ,    转 砖注专转 驻住 转 砖注专 专转", topic: "注转 住拽", difficulty: "拽" },
            { id: 'q7_6', question: " 专转 拽转 (驻) 拽注 -0.01,  住转专转 拽住转 注转 住 I", options: ["1%", "5%", "10%", "99%"], correctAnswer: 0, explanation: "专转 拽转 (驻)  住转专转 拽住转 砖  拽转 爪注 注转 住 I.  驻  0.01, 住 注转 住 I  1%", topic: "注转 住拽", difficulty: "" },
            { id: 'q7_7', question: "爪 注 专转  (Confidence Level) 砖驻注 注 专 专 专-住", options: ["专 爪爪", "专 ", " 砖 专", "专 驻 砖 注转 转拽"], correctAnswer: 1, explanation: " 转  转专 (砖 99% 拽 95%) 砖驻专专 转 爪 , 注 专 转  专", topic: "注转 住拽", difficulty: "拽砖" },

            // 砖注专 8:  T
            { id: 'q8_1', question: "转 砖转砖  T 转 转", options: ["砖专  专爪 砖转 爪注 砖 砖转 拽爪转 砖转 转 拽砖专转  ", "砖专  专爪 砖转 爪注 砖 转 拽爪 驻 专 转注专转", "砖专 住转 转拽 砖 住 注", "砖专  专爪  拽砖专  砖 砖转 转"], correctAnswer: 0, explanation: " T 转 转 砖砖 砖转 爪注  砖转 拽爪转 砖转 注爪转   (砖, 专  砖, 拽爪转 住  拽爪转 拽专转)", topic: " T", difficulty: "" },
            { id: 'q8_2', question: "  注拽专   Z  T", options: [" Z 砖砖 砖转 转,  T 转", " Z 砖砖 砖专 住转 转拽 砖 住 注,  T 砖专   注 转 ", " T 转 专砖   转专  Z", " Z  转 -,  T 转 -"], correctAnswer: 1, explanation: " 注拽专  砖注 砖 Z 专砖 注 注 住转 转拽 砖 住,  T 砖砖 砖专 住转 转拽 砖 住  注,  砖转砖  砖 转 住转 转拽 砖 ", topic: " T", difficulty: "拽砖" },
            { id: 'q8_3', question: " 拽专 砖转砖  T ", options: ["砖专  专爪 砖转 转 爪注 爪 砖 砖转 拽爪转 砖转 砖 住", "砖专  专爪 拽  爪注 爪 砖 拽爪转 住 砖转 专 拽专住 ", "砖专  专爪   砖 拽砖专  住驻专 砖注转  爪 ", "砖专 住转 转拽 砖 住 注  拽 爪注 "], correctAnswer: 1, explanation: " T  (Paired Samples T-test) 砖砖 砖转 爪注 砖 转 拽爪转 拽 砖 爪 砖 (, 驻 专 转注专转,  砖 转 砖),  砖转 爪注  转 转", topic: " T", difficulty: "拽砖" },
            { id: 'q8_4', question: "转 砖转砖  T   (One-Sample T-test)", options: ["砖专 专爪 砖转 爪注 砖   注专 注 住, 住转 转拽 砖 住  注", "砖专 专爪 砖转 爪注 砖 砖转 拽爪转 转 转转", "砖专 专爪 砖转 爪注 砖 转 拽爪 砖  砖", "砖专 住转 转拽 砖 住 注"], correctAnswer: 0, explanation: " T   砖砖 拽转 砖注专转 注 爪注 住 砖专 住转 转拽 砖 住  注, 砖   ", topic: " T", difficulty: "" },
            { id: 'q8_5', question: " '专转 驻砖' (Degrees of Freedom)  T", options: ["住驻专 砖转 拽专", "住驻专 转爪驻转  ", "住驻专 转爪驻转 驻砖转 砖转转 专 转 爪 住", "住驻专 拽爪转 拽转"], correctAnswer: 2, explanation: "专转 驻砖 转住转 住驻专 转爪驻转 转 转转 注专 转, 专, 住驻专 注专 砖 砖转转 驻砖转 专 砖 爪 住 (砖, 砖 爪注)", topic: " T", difficulty: "拽砖" },
            { id: 'q8_6', question: "  T 转 砖转 爪注 爪 砖 转 住 驻 专 拽专住 ", options: [" T  ", " T 转 转", " T ", " T -"], correctAnswer: 2, explanation: " T  (Paired Samples T-test) 砖砖 砖转 爪注 砖 转 拽爪转 拽 砖 爪 砖  砖转 爪注  转 转", topic: " T", difficulty: "" },
            { id: 'q8_7', question: "  注拽专转  T 转 转  砖转 住转", options: ["砖转 住转 转 转 砖 驻 拽", "砖转 住转 转 转  (转 砖转)", " 砖转 砖转 住转", "专拽 砖转  砖"], correctAnswer: 1, explanation: "转 转 专转  T 转 转  转 砖转, 专 砖砖转 住转 砖 拽  砖. 拽转 专住转 砖  砖 转 转 (  砖)", topic: " T", difficulty: "拽砖 " },
            { id: 'q8_8', question: "   转驻转 转  T (驻转 专住转 拽住转)", options: ["转  转驻 驻 ", "转  转驻 专转", "转  转 注 砖转 砖", " 砖转 转驻转 转"], correctAnswer: 1, explanation: " 专转  T  砖转 住 转驻 专转. 注 转,  T 砖 专住 住转 驻专 砖    ", topic: " T", difficulty: "拽砖" },
            { id: 'q8_9', question: " 拽专 专转 驻砖  T , 砖  T 转 转 (注专 N 砖)", options: ["专转 驻砖 转 转专 ", "专转 驻砖 转", "专转 驻砖 转 转专 ", "专转 驻砖  专转 "], correctAnswer: 2, explanation: "专转 驻砖  T   N-1 (砖专 N  住驻专 转), 注 砖 T 转 转  N1+N2-2. , 注专    , 专转 驻砖  转 转专", topic: " T", difficulty: "拽砖 " },

            // 砖注专 9: 拽砖专  砖转
            { id: 'q9_1', question: "   转专 拽砖专  拽  砖 砖转", options: [" 砖注专 砖转  注, 注专 砖转 砖 专 驻 注拽", " 拽砖专 专专  砖转", " 砖注专 砖转  注, 注专 砖转 砖  注转 驻 注拽", "拽砖专  砖转  爪专转 U 驻"], correctAnswer: 2, explanation: "拽砖专  拽 驻专砖 砖砖专 注专 砖转  注,  注专 砖转 砖  注转. '拽' 转住 注拽转 拽 拽砖专", topic: "拽砖专  砖转", difficulty: "拽" },
            { id: 'q9_2', question: "拽 驻专住 (r) 砖 -0.9.  转 住拽 ", options: ["拽 拽砖专 砖 拽  砖转", " 拽砖专 专  砖转", "拽 拽砖专  拽   砖转", "拽 拽砖专  砖  砖转"], correctAnswer: 2, explanation: "拽 驻专住 注  -1 -1. 注专 拽专 -1 ( 0.9) 爪注 注 拽砖专 专  拽 ", topic: "拽砖专  砖转", difficulty: "" },
            { id: 'q9_3', question: " 专 注拽专转 砖 砖砖 专转 驻专", options: ["爪 转 转驻转 砖转 砖 砖转 ", "砖转 爪注  拽爪转 砖转", " 转 转 拽砖专  砖 砖转 转", "爪 转 爪 专注 砖 砖转"], correctAnswer: 2, explanation: "专转 驻专 (Scatter Plot) 砖砖转 爪 转 砖 拽砖专  砖 砖转 转, 驻砖专转 转 转  拽砖专, 注爪转 爪专转", topic: "拽砖专  砖转", difficulty: "拽" },
            { id: 'q9_4', question: " 住 砖 拽砖专 转专 注  拽 驻专住 砖", options: [" 砖砖转  注, 砖转 砖 注  ", " 拽砖专 专  砖转", " 砖砖转  注, 砖转 砖 专", "拽砖专  专"], correctAnswer: 2, explanation: "拽 驻专住 砖 ( 0 -1-) 爪注 注 拽砖专 驻:  砖注专 砖转  注, 注专 砖转 砖  专转", topic: "拽砖专  砖转", difficulty: "拽" },
            { id: 'q9_5', question: " 转 爪 (Contingency Table)", options: [" 爪 转 拽砖专  砖 砖转 转", " 爪 转 转驻转 砖转 砖 砖转 ", " 爪 转 拽砖专  砖 砖转 转  住专", " 砖砖转 砖 爪注"], correctAnswer: 2, explanation: "转 爪 砖砖转 爪转 拽砖专  砖 砖转 拽专 (砖  住专), 注  爪转 砖转 砖转驻转 砖 爪专驻 拽专转", topic: "拽砖专  砖转", difficulty: "" },
            { id: 'q9_6', question: " 爪注 拽 驻专住 砖 -0", options: ["拽砖专  砖", "拽砖专 砖 砖", " 拽砖专 专  砖转", "拽砖专 拽 "], correctAnswer: 2, explanation: "拽 驻专住 砖 -0 爪注 注  砖 拽砖专 专  砖 砖转. 转 砖拽 拽砖专  专", topic: "拽砖专  砖转", difficulty: "" },
            { id: 'q9_7', question: "    驻 砖 拽砖专 住住", options: ["", "注爪", "爪专", "拽转"], correctAnswer: 3, explanation: "拽转   砖 拽转 砖注专转,  驻 砖专 砖 拽砖专 住住 注爪 ( , 注爪 爪专)", topic: "拽砖专  砖转", difficulty: "拽砖" },
            { id: 'q9_8', question: "专转 驻专 爪 拽转 转驻专转 爪专 拽专转   驻住.  转 住拽 ", options: ["拽 拽砖专  拽", "拽 拽砖专 砖 拽", " 拽砖专 专 专专", "拽 拽砖专  专 拽"], correctAnswer: 2, explanation: "驻专 拽专 砖 拽转 专转 驻专 爪注 注 注专 拽砖专 专 专专  砖转", topic: "拽砖专  砖转", difficulty: "拽" },
            { id: 'q9_9', question: "拽 驻专住 转 转 拽砖专   住 砖转", options: ["砖 砖转 转", "砖 砖转 住专", "砖 砖转 转", "砖转 转 砖转 转"], correctAnswer: 2, explanation: "拽 驻专住 (r) 砖砖 转 注爪转  拽砖专 专  砖 砖转 转 (专  )", topic: "拽砖专  砖转", difficulty: "" }
        ];

        //  -DOM
        const welcomeScreen = document.getElementById('welcome-screen');
        const startQuizButton = document.getElementById('start-quiz-button');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const questionDisplay = document.getElementById('question-display');
        const difficultyDisplay = document.getElementById('difficulty-display');
        const optionsContainer = document.getElementById('options-container');
        const feedbackDisplay = document.getElementById('feedback-display');
        const nextButton = document.getElementById('next-button');
        const skipButton = document.getElementById('skip-button'); // 驻转专 
        const replaceButton = document.getElementById('replace-button');
        const progressDisplay = document.getElementById('progress-display');
        const finalScoreDisplay = document.getElementById('final-score');
        const restartButton = document.getElementById('restart-button');
        const learningMeterFill = document.getElementById('learning-meter-fill');
        const learningMeterText = document.getElementById('learning-meter-text');
        const finalLearningMeterText = document.getElementById('final-learning-meter-text');
        const currentStreakDisplay = document.getElementById('current-streak');
        const bonusPopupContainer = document.getElementById('bonus-popup-container');
        const verbalAssessmentDisplay = document.getElementById('verbal-assessment');
        const resultsTitle = document.getElementById('results-title');

        let selectedQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answeredCurrentQuestion = false;
        let correctlyAnsweredUniqueQuestions = new Set();
        let currentStreak = 0;
        
        // 专转 专转 住 注转
        const streakBonusLevels = {
            3: "住 专爪祝 拽! (+1 拽)",
            5: "专爪祝 专! (+1 拽)",
            10: "住专 住住拽! (+1 拽)"
        };

        // 驻拽爪 专转 注专 转 驻 爪 (注)
        function getVerbalAssessment(scorePercentage) {
            if (scorePercentage === 100) {
                return "爪 砖! 砖 转 专. 转  ! ";
            } else if (scorePercentage >= 90) {
                return "爪!  砖 注拽 住转. 转/转 专  爪 .";
            } else if (scorePercentage >= 75) {
                return " ! 专转 注 . 住/ 转拽 砖 砖 注转  注 砖转.";
            } else if (scorePercentage >= 50) {
                return "注专/转! 住住 拽,  砖 拽 拽 砖注转. 专/专 注 住专 转专/ 砖.";
            } else if (scorePercentage >= 20) {
                return "转 ! 转专 专 砖砖 砖 砖专砖 专 住转. 砖 转专!";
            } else {
                return "  注 抓! 转专  爪注 专砖.  转转砖/  注砖 转/转 注/转 拽  爪专 砖. 住/ 砖!";
            }
        }

        // 驻拽爪 爪转  拽驻抓 砖 住
        function showBonusPopup(message) {
            const popup = document.createElement('div');
            popup.className = 'streak-bonus-popup';
            popup.textContent = message;
            bonusPopupContainer.appendChild(popup);
            
            setTimeout(() => {
                if(bonusPopupContainer.contains(popup)) {
                    bonusPopupContainer.removeChild(popup);
                }
            }, 2500);
        }

        // 驻拽爪 拽 拽转 住祝 砖转
        function cleanQuestionText() {
            allQuestions.forEach(q => {
                if (q.question.endsWith('.')) q.question = q.question.slice(0, -1);
                if (q.explanation.endsWith('.')) q.explanation = q.explanation.slice(0, -1);
            });
        }

        // 驻拽爪 专转 20 砖转 拽专转 转 专
        function selectRandomQuestions() {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            selectedQuestions = shuffled.slice(0, 20);
        }

        // 驻拽爪 注  
        function updateLearningMeter() {
            const totalUniqueQuestions = allQuestions.length;
            const answeredCorrectlyCount = correctlyAnsweredUniqueQuestions.size;
            const percentage = (answeredCorrectlyCount / totalUniqueQuestions) * 100;
            learningMeterFill.style.width = `${percentage.toFixed(0)}%`;
            learningMeterText.textContent = ` : ${percentage.toFixed(0)}% (${answeredCorrectlyCount}/${totalUniqueQuestions})`;
        }

        // 驻拽爪 注  专爪祝
        function updateStreakDisplay() {
            currentStreakDisplay.textContent = currentStreak;
            const meterElement = document.getElementById('streak-meter');

            // 注 爪注 专爪祝 转 专
            if (currentStreak >= 5) {
                 meterElement.style.backgroundColor = '#d1fae5';
                 meterElement.style.color = '#059669';
                 meterElement.style.border = '2px solid #059669';
            } else if (currentStreak >= 3) {
                meterElement.style.backgroundColor = '#fffbeb';
                meterElement.style.color = '#c05621';
                meterElement.style.border = '1px solid #c05621';
            } else {
                meterElement.style.backgroundColor = '#f7f3ff';
                meterElement.style.color = '#6b46c1';
                meterElement.style.border = '1px solid #d6bcfa';
            }
        }

        // 驻拽爪 爪转 砖 转
        function displayQuestion() {
            quizScreen.classList.remove('hidden');
            welcomeScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            feedbackDisplay.classList.add('hidden');
            nextButton.classList.add('hidden');
            
            // 驻转专 驻注 驻注 砖
            replaceButton.disabled = false;
            skipButton.disabled = false;
            
            answeredCurrentQuestion = false;

            const question = selectedQuestions[currentQuestionIndex];
            questionDisplay.textContent = question.question;
            
            // 1. 住专转  拽转 爪注 拽转
            difficultyDisplay.className = 'difficulty-text mb-4';

            // 2. 转 拽转 爪注 转
            const difficultyClassMap = {
                "拽": "difficulty-easy",
                "": "difficulty-medium",
                "拽砖": "difficulty-hard",
                "拽砖 ": "difficulty-very-hard",
            };
            const difficultyKey = question.difficulty.trim();
            const newClass = difficultyClassMap[difficultyKey];
            
            difficultyDisplay.textContent = `拽砖: ${question.difficulty}`;
            if (newClass) {
                difficultyDisplay.classList.add(newClass);
            }
            
            optionsContainer.innerHTML = '';
            progressDisplay.textContent = `砖 ${currentQuestionIndex + 1} 转 ${selectedQuestions.length}`;
            updateStreakDisplay();

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-button');
                button.dataset.index = index;
                button.addEventListener('click', () => checkAnswer(index));
                optionsContainer.appendChild(button);
            });
        }

        // 驻拽爪 拽转 转砖 砖专
        function checkAnswer(selectedIndex) {
            if (answeredCurrentQuestion) return;

            answeredCurrentQuestion = true;
            replaceButton.disabled = true;
            skipButton.disabled = true; // 专 转 驻转专 
            const question = selectedQuestions[currentQuestionIndex];
            const optionButtons = optionsContainer.querySelectorAll('.option-button');

            optionButtons.forEach((button, index) => {
                button.disabled = true;
                if (index === question.correctAnswer) {
                    button.classList.add('correct');
                } else if (index === selectedIndex) {
                    button.classList.add('incorrect');
                }
            });

            if (selectedIndex === question.correctAnswer) {
                score++;
                currentStreak++;
                
                if (streakBonusLevels[currentStreak]) {
                    score += 1; // 拽转 住
                    showBonusPopup(streakBonusLevels[currentStreak]);
                }
                
                if (!correctlyAnsweredUniqueQuestions.has(question.id)) {
                    correctlyAnsweredUniqueQuestions.add(question.id);
                    updateLearningMeter();
                }
                feedbackDisplay.innerHTML = `<strong>转砖 !</strong><br>${question.explanation}`;
            } else {
                currentStreak = 0;
                feedbackDisplay.innerHTML = `<strong>转砖 砖.</strong> 转砖  转: "${question.options[question.correctAnswer]}".<br>${question.explanation}`;
            }

            updateStreakDisplay();
            feedbackDisplay.classList.remove('hidden');
            nextButton.classList.remove('hidden');
        }

        // 驻拽爪 注专 砖   爪转 转爪转 住驻转
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < selectedQuestions.length) {
                displayQuestion();
            } else {
                showResults();
            }
        }
        
        // 驻拽爪转 
        function skipQuestion() {
            if (answeredCurrentQuestion) return;
            
            // 专 驻转专
            answeredCurrentQuestion = true;
            currentStreak = 0; //  驻住 转 专爪祝
            replaceButton.disabled = true;
            skipButton.disabled = true;
            
            // 爪 注 拽爪专 注 
            feedbackDisplay.innerHTML = `<strong>转 注 砖 .</strong>   , 拽/拽 转 住专 : <br>${selectedQuestions[currentQuestionIndex].explanation}`;
            
            // 爪 转 住专  注专
            feedbackDisplay.classList.remove('hidden');
            nextButton.classList.remove('hidden');
            
            updateStreakDisplay();
        }

        // 驻拽爪 驻转 砖 转
        function replaceCurrentQuestion() {
            if (answeredCurrentQuestion) return;

            let newQuestion = null;
            let attempts = 0;
            const maxAttempts = allQuestions.length * 5; 

            while (newQuestion === null && attempts < maxAttempts) {
                const randomIndex = Math.floor(Math.random() * allQuestions.length);
                const potentialNewQuestion = allQuestions[randomIndex];

                const isAlreadyInSelected = selectedQuestions.some(q => q.id === potentialNewQuestion.id);

                if (!isAlreadyInSelected) {
                    newQuestion = potentialNewQuestion;
                }
                attempts++;
            }

            if (newQuestion) {
                selectedQuestions[currentQuestionIndex] = newQuestion;
                displayQuestion();
            } else {
                feedbackDisplay.innerHTML = `<strong> 砖转 住驻转 转 驻 专注.</strong>`;
                feedbackDisplay.classList.remove('hidden');
            }
        }


        // 驻拽爪 爪转 转爪转  住驻转
        function showResults() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            const totalQuestions = selectedQuestions.length;
            const scorePercentage = (score / totalQuestions) * 100;
            const finalScoreMessage = `拽转 ${score} 转 ${totalQuestions} 砖转 转. (${scorePercentage.toFixed(0)}%)`;
            
            finalScoreDisplay.textContent = finalScoreMessage;
            
            // 注专 转
            verbalAssessmentDisplay.textContent = getVerbalAssessment(scorePercentage);

            // 注   住 住
            finalLearningMeterText.textContent = `  : ${correctlyAnsweredUniqueQuestions.size} 转 ${allQuestions.length} 砖转 转 (${((correctlyAnsweredUniqueQuestions.size / allQuestions.length) * 100).toFixed(0)}%)`;
            
            // 转专转 住 住 专转
            resultsTitle.textContent = "住 ";
        }

        // 驻拽爪 转  砖
        function initializeQuiz() {
            selectRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            currentStreak = 0;
            displayQuestion();
            updateLearningMeter();
            updateStreakDisplay();
        }

        // 驻拽爪 砖驻注 转  驻转专 住 驻转
        function startQuiz() {
            initializeQuiz();
        }

        // 专注 爪 注 驻转专
        startQuizButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', nextQuestion);
        skipButton.addEventListener('click', skipQuestion); // 爪 注 
        replaceButton.addEventListener('click', replaceCurrentQuestion);
        restartButton.addEventListener('click', initializeQuiz);

        // 转 专砖 - 拽 专拽 爪转 住 驻转
        document.addEventListener('DOMContentLoaded', () => {
            cleanQuestionText();
            welcomeScreen.classList.remove('hidden');
            quizScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            updateLearningMeter(); 
        });
    </script>
</body>
</html>
